<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Recording ggplot Objects with chronicler • chronicler</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Recording ggplot Objects with chronicler">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">chronicler</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a-non-mathematician-s-introduction-to-monads.html">A non-mathematician's introduction to monads</a></li>
    <li><a class="dropdown-item" href="../articles/a-real-world-example.html">A real world example</a></li>
    <li><a class="dropdown-item" href="../articles/recording-ggplot.html">Recording ggplot Objects with chronicler</a></li>
    <li><a class="dropdown-item" href="../articles/the-maybe-monad.html">The Maybe monad</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Recording ggplot Objects with chronicler</h1>
            
      

      <div class="d-none name"><code>recording-ggplot.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Working with <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> can present a unique challenge:
<strong>lazy evaluation</strong>. An error in your plot code, like a
typo in a variable name, won’t stop execution when you define the plot.
The error only appears when you try to print or render it. This can be
especially frustrating when rendering a long R Markdown or Quarto
document, where a single broken plot can cause the entire process to
fail.</p>
<p><code>{chronicler}</code> provides a solution with
<code><a href="../reference/record_ggplot.html">record_ggplot()</a></code>. This function acts as a safety net,
wrapping your entire ggplot expression in a recorder that safely
evaluates it. It captures not only the final plot, but also all the
errors, warnings, and messages that occur during its construction.</p>
<p>This process results in two key benefits:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Crash-Proof Rendering</strong>: If a plot fails,
<code><a href="../reference/record_ggplot.html">record_ggplot()</a></code> catches the error and produces a
placeholder <strong>error plot</strong> that displays the error message.
This allows your R Markdown documents to render completely, letting you
fix the broken plot later.</li>
<li>
<strong>Enhanced Debugging</strong>: Every step is logged. You get a
detailed, reproducible trace of the plot’s construction, making it much
easier to diagnose issues.</li>
</ol>
<p>This vignette demonstrates how to use <code><a href="../reference/record_ggplot.html">record_ggplot()</a></code> to
make your plotting workflows more robust and debuggable.</p>
</div>
<div class="section level2">
<h2 id="basic-recording-and-inspection">Basic Recording and Inspection<a class="anchor" aria-label="anchor" href="#basic-recording-and-inspection"></a>
</h2>
<p>Let’s start by recording a valid ggplot expression.
<code><a href="../reference/record_ggplot.html">record_ggplot()</a></code> captures the entire call, including all the
layers.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/record_ggplot.html">record_ggplot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mpg</span>, y <span class="op">=</span> <span class="va">hp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, formula <span class="op">=</span> <span class="va">y</span><span class="op">~</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The resulting <code>r_plot</code> object is a
<strong>chronicle</strong>. When you print it, the ggplot object is
rendered as usual. Behind the scenes, however, <code>{chronicler}</code>
has logged the entire process.</p>
<p>To get the raw ggplot object back, you can use
<code><a href="../reference/unveil.html">unveil()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/unveil.html">unveil</a></span><span class="op">(</span><span class="va">r_plot</span><span class="op">)</span></span></code></pre></div>
<p><img src="recording-ggplot_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>To see the detailed log, including any messages generated during
rendering (like the one from <code>geom_smooth</code>), use
<code><a href="../reference/read_log.html">read_log()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/read_log.html">read_log</a></span><span class="op">(</span><span class="va">r_plot</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "OK `ggplot(mtcars, aes(x = mpg, y = hp)) + geom_point() + geom_smooth(method = \"lm\", \n    formula = y ~ x)` at 11:39:18 (0.771s)"</span></span>
<span><span class="co">#&gt; [2] "Total: 0.771 secs"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="handling-failures-gracefully">Handling Failures Gracefully<a class="anchor" aria-label="anchor" href="#handling-failures-gracefully"></a>
</h2>
<p>The real power of <code><a href="../reference/record_ggplot.html">record_ggplot()</a></code> becomes apparent when
something goes wrong.</p>
<div class="section level4">
<h4 id="capturing-errors">Capturing Errors<a class="anchor" aria-label="anchor" href="#capturing-errors"></a>
</h4>
<p>Consider a common typo, where <code>hp</code> is misspelled as
<code>hpp</code>. A standard ggplot call would throw an error upon
printing. With <code><a href="../reference/record_ggplot.html">record_ggplot()</a></code>, the error is caught and
logged, and an informative error plot is generated instead.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r_bad</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/record_ggplot.html">record_ggplot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mpg</span>, y <span class="op">=</span> <span class="va">hpp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  <span class="co"># typo: 'hpp'</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Printing the object shows the error plot, not a crash</span></span>
<span><span class="va">r_bad</span></span>
<span><span class="co">#&gt; NOK! Value computed unsuccessfully:</span></span>
<span><span class="co">#&gt; ---------------</span></span>
<span><span class="co">#&gt; Just</span></span></code></pre></div>
<p><img src="recording-ggplot_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ---------------</span></span>
<span><span class="co">#&gt; This is an object of type `chronicle`.</span></span>
<span><span class="co">#&gt; Retrieve the value of this object with unveil(.c, "value").</span></span>
<span><span class="co">#&gt; To read the log of this object, call read_log(.c).</span></span>
<span></span>
<span><span class="co"># The log tells you exactly what went wrong</span></span>
<span><span class="fu"><a href="../reference/read_log.html">read_log</a></span><span class="op">(</span><span class="va">r_bad</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "NOK `ggplot(mtcars, aes(x = mpg, y = hpp)) + geom_point()` at 11:39:20 (0.043s)"</span></span>
<span><span class="co">#&gt; [2] "Total: 0.043 secs"</span></span></code></pre>
<p>The R session continues without interruption, and you have a clear
record of the problem.</p>
</div>
<div class="section level4">
<h4 id="controlling-strictness">Controlling Strictness<a class="anchor" aria-label="anchor" href="#controlling-strictness"></a>
</h4>
<p>Sometimes, you may want to treat messages or warnings as if they were
failures. The <code>strict</code> argument gives you this control. For
example, <code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth()</a></code> produces a message about the formula
it’s using. By setting <code>strict = 3</code>, we can tell
<code>record_ggplot</code> to treat any message as a critical event and
generate an error plot.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r_plot_strict</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/record_ggplot.html">record_ggplot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mpg</span>, y <span class="op">=</span> <span class="va">hp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span>,</span>
<span>  strict <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Now, instead of the plot, we see the captured message displayed in
the error plot:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/unveil.html">unveil</a></span><span class="op">(</span><span class="va">r_plot_strict</span><span class="op">)</span></span></code></pre></div>
<p><img src="recording-ggplot_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p><code><a href="../reference/record_ggplot.html">record_ggplot()</a></code> provides a safe and traceable way to
build ggplot objects. By wrapping your plot code, it makes complex plots
easier to debug and prevents common errors from halting your analysis or
document rendering. It transforms plot creation from a potentially
disruptive step into a logged, reproducible, and robust part of your
workflow.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bruno Rodrigues.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
